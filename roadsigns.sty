\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{roadsigns}[LaTeX package to for roadsigns]

\RequirePackage{tikz}

\usetikzlibrary{spath3,intersections}

\newcommand{\interstate}[1]{%
  \begin{tikzpicture}[x=1em,y=1em]
    \useasboundingbox (-1.5,-1.5) rectangle (1.5,1.5);
    % framing
    \path[spath/save=circleBR] (0.2,0.1) circle (0.9);
    \path[spath/save=circleBL] (-0.2,0.1) circle (0.9);
    \path[spath/save=circleTR] (0.3,1.5) circle (0.9);
    \path[spath/save=circleTL] (-0.3,1.5) circle (0.9);

    % spath operations
    \tikzset
    {
      % splitting
      spath/split at intersections={circleTR}{circleTL},
      spath/split at intersections={circleTR}{circleBL},
      spath/split at intersections={circleBR}{circleTL},
      spath/split at intersections={circleBR}{circleBL},
      % save components
      spath/get components of={circleTR}\cTR,
      spath/get components of={circleBR}\cBR,
      spath/get components of={circleTL}\cTL,
      spath/get components of={circleBL}\cBL,
    }

    % shield
    \draw[
      spath/use=\getComponentOf\cTR{4},
      spath/use={\getComponentOf\cBL{5},reverse,weld},
      spath/use={\getComponentOf\cBR{4},reverse,weld},
      spath/use={\getComponentOf\cTL{3},weld},
      spath/adjust and close=current,
    ];

    \node at (0,0) {\sffamily#1};
  \end{tikzpicture}
  }

\newcommand{\highway}[1]{%
  \begin{tikzpicture}[x=1em,y=1em]
    \useasboundingbox (-1.5,-1.5) rectangle (1.5,1.5);
    % framing, numbering is based off aboslute height
    \path[spath/save=circle1R] (0.217,1.077) circle (0.390);
    \path[spath/save=circle2R] (0.976,0.263) circle (0.40);
    \path[spath/save=circle3R] (0.35,-0.15) circle (0.35);
    \path[spath/save=circle4R] (0.35,-1.125) circle (0.625);
    \path[spath/save=connectorR] (0.217,1.077) -- (0.976,0.263);
    \path[spath/save=splitter1R] (0.976,0.263) -- (0.35,-0.15);
    \path[spath/save=splitter2R] (0.35,-0.15) -- (0.35,-1.125);
    \path[spath/save=circle1L] (-0.217,1.077) circle (0.390);
    \path[spath/save=circle2L] (-0.976,0.263) circle (0.40);
    \path[spath/save=circle3L] (-0.35,-0.15) circle (0.35);
    \path[spath/save=circle4L] (-0.35,-1.125) circle (0.625);
    \path[spath/save=connectorL] (-0.217,1.077) -- (-0.976,0.263);
    \path[spath/save=splitter1L] (-0.976,0.263) -- (-0.35,-0.15);
    \path[spath/save=splitter2L] (-0.35,-0.15) -- (-0.35,-1.125);

    % spath operations
    \tikzset
    {
      % splitting
      spath/split at intersections={circle1R}{circle1L},
      spath/split at intersections={circle1R}{connectorR},
      spath/split at intersections={circle1L}{connectorL},
      spath/split at intersections={circle2R}{connectorR},
      spath/split at intersections={circle2L}{connectorL},
      spath/split at intersections={circle2R}{splitter1R},
      spath/split at intersections={circle2L}{splitter1L},
      spath/split at intersections={circle3R}{splitter1R},
      spath/split at intersections={circle3L}{splitter1L},
      spath/split at intersections={circle3R}{splitter2R},
      spath/split at intersections={circle3L}{splitter2L},
      spath/split at intersections={circle4R}{splitter2R},
      spath/split at intersections={circle4L}{splitter2L},
      spath/split at intersections={circle4R}{circle4L},
      % save components
      spath/get components of={circle1R}\cOneR,
      spath/get components of={circle1L}\cOneL,
      spath/get components of={connectorR}\cConnectorR,
      spath/get components of={connectorL}\cConnectorL,
      spath/get components of={circle2R}\cTwoR,
      spath/get components of={circle2L}\cTwoL,
      spath/get components of={circle3R}\cThreeR,
      spath/get components of={circle3L}\cThreeL,
      spath/get components of={circle4R}\cFourR,
      spath/get components of={circle4L}\cFourL,
    }

    \draw[
      spath/use={\getComponentOf\cOneR{3}},
      spath/use={\getComponentOf\cConnectorR{2},weld},
      spath/use={\getComponentOf\cTwoR{2},weld},
      spath/use={\getComponentOf\cThreeR{3},reverse,weld},
      spath/use={\getComponentOf\cFourR{2},weld},
      spath/use={\getComponentOf\cFourL{4},weld},
      spath/use={\getComponentOf\cThreeL{2},reverse,weld},
      spath/use={\getComponentOf\cTwoL{3},weld},
      spath/use={\getComponentOf\cConnectorL{2},reverse,weld},
      spath/use={\getComponentOf\cOneL{3},weld},
      spath/adjust and close=current,
    ];

    \node at (0,0) {\sffamily#1};
  \end{tikzpicture}
  }

\newcommand{\widehighway}[1]{%
  \begin{tikzpicture}[x=1em,y=1em,scale=1.2]
    \useasboundingbox (-1,-0.8) rectangle (1,0.8);
    % framing, numbers are based off vertical position
    \path[spath/save=circle1R] (0.3,1.11511) circle (0.522311);
    \path[spath/save=circle2R] (1.20532,0.190242) circle (0.38516);
    \path[spath/save=circle3R] (0.55,-0.15) circle (0.35);
    \path[spath/save=circle4R] (0.225,-0.794558) circle (0.294558);
    \path[spath/save=circle1L] (-0.3,1.11511) circle (0.522311);
    \path[spath/save=circle2L] (-1.20532,0.190242) circle (0.38516);
    \path[spath/save=circle3L] (-0.55,-0.15) circle (0.35);
    \path[spath/save=circle4L] (-0.225,-0.794558) circle (0.294558);
    % 1-2 connectors
    \path[spath/save=conn12R] (0.440624,0.867885) -- (1.1101,0.210911);
    \path[spath/save=conn12L] (-0.440624,0.867885) -- (-1.1101,0.210911);
    % 3-4 connector
    \path[spath/save=conn34] (0.7,-0.50) -- (-0.7,-0.50);
    % splitters
    \path[spath/save=split23R] (1.20532,0.190242) -- (0.55,-0.15);
    \path[spath/save=split23L] (-1.20532,0.190242) -- (-0.55,-0.15);
    \path[spath/save=split3Conn34R] (0.55,-0.40) -- (0.55,-0.60);
    \path[spath/save=split4Conn34R] (0.225,-0.40) -- (0.225,-0.60);
    \path[spath/save=split3Conn34L] (-0.55,-0.40) -- (-0.55,-0.60);
    \path[spath/save=split4Conn34L] (-0.225,-0.40) -- (-0.225,-0.60);

    % spath operations
    \tikzset
    {
      % splitting
      spath/split at intersections={circle1R}{circle1L},
      spath/split at intersections={circle1R}{conn12R},
      spath/split at intersections={conn12R}{circle2R},
      spath/split at intersections with={circle2R}{split23R},
      spath/split at intersections with={circle3R}{split23R},
      spath/split at intersections with={circle3R}{split3Conn34R},
      spath/split at intersections with={conn34}{split3Conn34R},
      spath/split at intersections with={conn34}{split4Conn34R},
      spath/split at intersections with={circle4R}{split4Conn34R},
      spath/split at intersections={circle4R}{circle4L},
      spath/split at intersections={circle1L}{conn12L},
      spath/split at intersections={conn12L}{circle2L},
      spath/split at intersections with={circle2L}{split23L},
      spath/split at intersections with={circle3L}{split23L},
      spath/split at intersections with={circle3L}{split3Conn34L},
      spath/split at intersections with={conn34}{split3Conn34L},
      spath/split at intersections with={conn34}{split4Conn34L},
      spath/split at intersections with={circle4L}{split4Conn34L},
      % save components
      spath/get components of={circle1R}\circleOneR,
      spath/get components of={circle2R}\circleTwoR,
      spath/get components of={circle3R}\circleThreeR,
      spath/get components of={circle4R}\circleFourR,
      spath/get components of={circle1L}\circleOneL,
      spath/get components of={circle2L}\circleTwoL,
      spath/get components of={circle3L}\circleThreeL,
      spath/get components of={circle4L}\circleFourL,
      spath/get components of={conn12R}\connOneTwoR,
      spath/get components of={conn12L}\connOneTwoL,
      spath/get components of={conn34}\connThreeFour,
      spath/get components of={split23R}\splitTwoThreeR,
      spath/get components of={split23L}\splitTwoThreeL,
      spath/get components of={split3Conn34R}\splitThreeConnThreeFourR,
      spath/get components of={split4Conn34R}\splitFourConnThreeFourR,
      spath/get components of={split3Conn34L}\splitThreeConnThreeFourL,
      spath/get components of={split4Conn34L}\splitFourConnThreeFourL,
    }

    % shield
    \draw[
      spath/use={\getComponentOf\circleOneR{3}},
      spath/use={\getComponentOf\connOneTwoR{2},weld},
      spath/use={\getComponentOf\circleTwoR{2},weld},
      spath/use={\getComponentOf\circleThreeR{3},reverse,weld},
      spath/use={\getComponentOf\connThreeFour{2},weld},
      spath/use={\getComponentOf\circleFourR{2},weld},
      spath/use={\getComponentOf\circleFourL{2},weld},
      spath/use={\getComponentOf\connThreeFour{4},weld},
      spath/use={\getComponentOf\circleThreeL{2},reverse,weld},
      spath/use={\getComponentOf\circleTwoL{3},weld},
      spath/use={\getComponentOf\connOneTwoL{2},reverse,weld},
      spath/use={\getComponentOf\circleOneL{3},weld},
      spath/adjust and close=current,
    ];


    \node at (0,0) {\sffamily#1};
  \end{tikzpicture}
  }

